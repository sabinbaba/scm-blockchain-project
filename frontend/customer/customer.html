<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Customer Dashboard</title>
    <link rel="stylesheet" href="../css/admin-style.css">
</head>
<body>

<!-- HEADER -->
<header class="header">
    <div class="logo">SCM Blockchain</div>
    <div class="header-right">
        <span id="userName">Customer1</span>
        <button class="logout-btn">Logout</button>
    </div>
</header>

<!-- MAIN LAYOUT -->
<div class="main-container">

    <!-- SIDEBAR -->
    <aside class="sidebar">
        <ul>
            <li><a href="customer.html">Dashboard</a></li>
            <li><a href="view-products.html">View Products</a></li>
        </ul>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="content">
        <h1>Customer Dashboard</h1>
        <p>Welcome, Customer1! You can view all products and verify their authenticity.</p>

        <!-- PRODUCTS TABLE -->
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Product ID</th>
                        <th>Name</th>
                        <th>Category</th>
                        <th>Owner</th>
                        <th>Status</th>
                        <th>Date</th>
                        <th>Batch</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="productsTable">
                    <tr id="P001">
                        <td>P001</td>
                        <td>Smartphone</td>
                        <td>Electronics</td>
                        <td>Retailer1</td>
                        <td>Sold</td>
                        <td>2026-01-02</td>
                        <td>B001</td>
                        <td>
                            <button class="verify-btn">Verify</button>
                        </td>
                    </tr>
                    <tr id="P002">
                        <td>P002</td>
                        <td>Vaccine</td>
                        <td>Health</td>
                        <td>Distributor1</td>
                        <td>In Transit</td>
                        <td>2026-01-02</td>
                        <td>B002</td>
                        <td>
                            <button class="verify-btn">Verify</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

    </main>
</div>

<!-- FOOTER -->
<footer class="footer">
    <p>&copy; 2026 SCM Blockchain System. All Rights Reserved.</p>
</footer>

<!-- JS -->
<script>
document.addEventListener("DOMContentLoaded", () => {
    const role = "Customer";
    const username = "Customer1";

    // DISPLAY USER NAME
    document.getElementById("userName").innerText = username;

    const productsTable = document.getElementById("productsTable");

    // ATTACH EVENTS TO VERIFY BUTTON
    productsTable?.querySelectorAll("tr").forEach(row => {
        const verifyBtn = row.querySelector(".verify-btn");
        verifyBtn?.addEventListener("click", () => {
            const pid = row.cells[0].innerText;
            const owner = row.cells[3].innerText;
            const status = row.cells[4].innerText;
            alert(`Product ID: ${pid}\nOwner: ${owner}\nStatus: ${status}\nThis product is verified on blockchain.`);
        });
    });

    // REMOVE ALL OTHER ACTION BUTTONS (view-only)
    productsTable?.querySelectorAll("tr").forEach(row => {
        row.querySelectorAll("button").forEach(btn => {
            if(!btn.classList.contains("verify-btn")) btn.remove();
        });
    });
});
</script>
</body>
</html>
